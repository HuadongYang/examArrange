(function(t){function e(e){for(var s,i,l=e[0],o=e[1],c=e[2],p=0,m=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"2cc0":function(t,e,a){"use strict";a("46c5")},"46c5":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),r=(a("6660"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header",attrs:{flex:"main:justify"}},[a("h2",{staticStyle:{"padding-top":"8px","padding-left":"20px",margin:"0"}},[t._v("欢迎使用考场座位编排系统")]),t._v(".\n    "),a("div",{staticStyle:{"padding-top":"12px","padding-right":"20px",margin:"0",cursor:"pointer"},on:{click:t.out}},[t._v("退出登录")])]),t.loginVisible?t._e():a("router-view"),t.loginVisible?a("Login",{on:{login:t.login}}):t._e()],1)}),n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrap"},[a("el-form",{staticClass:"login-container",attrs:{"label-width":"80px"}},[a("h1",{staticClass:"title"},[t._v("用户登录")]),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{type:"text"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(e){return t.doSubmit()}}},[t._v("登陆")])],1)],1)],1)},l=[],o=a("bc3a"),c=a.n(o),u=a("4328"),p=a.n(u);let m;function d(t){m||(c.a.defaults.timeout=1e4,m=c.a.create({baseURL:t&&t.basePath||"http://localhost:8082",timeout:1e4}),m.interceptors.request.use(t=>(/^https:\/\/|http:\/\//.test(t.url),t),t=>{Promise.reject(t)}),m.interceptors.response.use(t=>{let e=t.data;return!e.success&&e.message,e},t=>Promise.resolve({sucess:!1})))}const h={},f=(t="post",e="",a={},s,r={},n={})=>{if(m)return new Promise((r,n)=>{h[e]=m({method:t,url:e+(s?"?"+p.a.stringify(s):""),data:a}).then(t=>{r(t),h[e]=!1}).catch(t=>{n(t),h[e]=!1})});console.log("请先调用INIT_NET进行初始化！")},g=({url:t="",data:e={},params:a="",headers:s={},options:r={}})=>f("get",t,p.a.stringify(e),a,r,s),b=({url:t="",data:e={},params:a="",options:s={},headers:r={}})=>f("post",t,p.a.stringify(e),a,s,r),y=({url:t="",data:e={},params:a="",headers:s={},options:r={}})=>f("post",t,e,a,r,s),v=({url:t="",data:e={},params:a="",headers:s={},options:r={}})=>f("put",t,e,a,r,s),x=({url:t="",data:e={},params:a="",headers:s={},options:r={}})=>f("delete",t,e,a,r,s);var w={INIT_NET:d,GET:g,POST:b,_POST:y,PUT:v,DEL:x};const S=async()=>await g({url:"/info/examInfo"}),_=async t=>await g({url:"/arrange/student",params:t}),N=async t=>await g({url:"/arrange/first",params:t}),I=async t=>await g({url:"/info/exam/student",params:t}),T=async t=>await g({url:"/user/login",params:t}),C=async t=>await g({url:"/setting/record",params:t});var O={data(){return{account:"admin",password:"admin"}},props:{},components:{},activated(){},watch:{},methods:{async doSubmit(){let t=await T({account:this.account,password:this.password});t?(this.$emit("login"),"admin"==t.role?this.$router.push({name:"Back"}):this.$router.push({name:"Exam"})):alert("账号或者密码错误")}}},k=O,D=(a("c1f8"),a("2877")),E=Object(D["a"])(k,i,l,!1,null,"416e46a0",null),$=E.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-button",{attrs:{type:"primary"},on:{click:t.down}},[t._v("下载")])],1)},L=[];const M=async()=>await g({url:"http://edunewexam.oss-cn-beijing.aliyuncs.com/examserver/examdata/3481016561156161696.json?Expires=1621147462&OSSAccessKeyId=viwnSxzjoE1fZKFh&Signature=4882804p6aAa8kQelOyp8XwYabg%3D"});var P={data(){return{}},props:{},components:{},activated(){},watch:{},methods:{async down(){await M()}}},A=P,Y=Object(D["a"])(A,j,L,!1,null,"544ae3e0",null),q=Y.exports,z={data(){return{loginVisible:!0}},components:{Login:$,Test1:q},methods:{login(){this.loginVisible=!1},out(){this.loginVisible=!0}}},H=z,V=(a("943c"),Object(D["a"])(H,r,n,!1,null,"41f54a2f",null)),F=V.exports,B=a("5c96"),J=a.n(B),K=(a("0fae"),a("8c4f")),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"back"},[a("div",{attrs:{flex:""}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8082/import/classroom",multiple:"",limit:1}},[a("el-button",{staticClass:"bt",attrs:{size:"medium",type:"primary"}},[t._v("上传教室信息")])],1),a("div",{staticStyle:{margin:"30px"}}),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8082/import/student",multiple:"",limit:1}},[a("el-button",{staticClass:"bt",attrs:{size:"medium",type:"primary"}},[t._v("上传学生、考场、老师信息")])],1)],1),a("div",{staticStyle:{margin:"100px"}}),a("el-divider"),a("div",{staticStyle:{margin:"100px"}}),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"bt",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"medium"},on:{click:t.arrangeFirst}},[t._v("安排考场")]),a("span",{staticStyle:{margin:"30px"}}),a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请安排座次"},on:{change:t.eArrangeType},model:{value:t.arrangeType,callback:function(e){t.arrangeType=e},expression:"arrangeType"}},t._l(t.types,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})})),1),a("div",{staticStyle:{margin:"30px"}})],1)])},U=[],G={data(){return{exams:[],classes:[],selectedClasses:[],students:[],arrangeType:"SNO",examId:"",classNum:"",fullscreenLoading:!1,tableData:[],classrooms:[],examInfo:"",setting:[],types:[{id:1,label:"学号乱序",value:"SNO"},{id:2,label:"姓名乱序",value:"NAME"}]}},watch:{async arrangeType(t){}},mounted(){this.getSetting()},methods:{clean(){this.exams=[],this.classes=[],this.selectedClasses=[],this.students=[],this.tableData=[],this.classrooms=[],this.examInfo={},this.examId="",this.classNum=""},async getSetting(){this.setting=await C(),this.setting&&this.setting.length>0&&(this.arrangeType=this.setting[this.setting.length-1].type)},async eArrangeType(t){this.clean(),this.fullscreenLoading=!0;let e=await _({arrangeType:t});e?this.$message({message:"排座成功",type:"success"}):this.$message({message:"排座失败",type:"error"}),this.fullscreenLoading=!1},async arrangeFirst(){this.clean(),this.fullscreenLoading=!0;let t=await N({arrangeType:this.arrangeType});t?this.$message({message:"安排考场成功",type:"success"}):this.$message({message:"安排考场失败",type:"error"}),this.fullscreenLoading=!1}}},Q=G,X=(a("df9f"),Object(D["a"])(Q,R,U,!1,null,null,null)),Z=X.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"examCt"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","span-method":t.objectSpanMethod}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"考试内容",width:"180"}}),a("el-table-column",{attrs:{prop:"time",label:"考试时间",width:"300"}}),a("el-table-column",{attrs:{prop:"classroom",label:"考场",width:"200"}}),a("el-table-column",{attrs:{prop:"classNum",label:"考试班级"}}),a("el-table-column",{attrs:{prop:"teachName",label:"监考老师",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.detail(e.row)}}},[t._v("详情")])]}}])})],1)],1)},tt=[];const et=(t,e="YYYY-mm-dd")=>{let a;const s={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(let r in s)a=new RegExp("("+r+")").exec(e),a&&(e=e.replace(a[1],1==a[1].length?s[r]:s[r].padStart(a[1].length,"0")));return e};var at={data(){return{spanArr:[],exams:[],classes:[],selectedClasses:[],students:[],arrangeType:"SNO",examId:"",classNum:"",fullscreenLoading:!1,tableData:[],classrooms:[],examInfo:"",types:[{id:1,label:"学号乱序",value:"SNO"},{id:2,label:"姓名乱序",value:"NAME"}]}},props:{},components:{},async created(){await this.setInfo()},watch:{examId(t){this.classNum="",this.selectedClasses=[],this.classes.forEach(e=>{e.examId==t&&this.selectedClasses.push(e)})}},methods:{setSpanArr(){let t=[],e=0;return this.tableData.forEach((a,s)=>{0===s?(t.push(1),e=0):this.tableData[s].id===this.tableData[s-1].id?(t[e]+=1,t.push(0)):(t.push(1),e=s)}),t},objectSpanMethod({row:t,column:e,rowIndex:a,columnIndex:s}){if(1===s||0===s){const t=this.spanArr[a],e=t>0?1:0;return{rowspan:t,colspan:e}}},clean(){this.exams=[],this.classes=[],this.selectedClasses=[],this.students=[],this.tableData=[],this.classrooms=[],this.examInfo={},this.examId="",this.classNum=""},timeTxt(t,e){let a="YYYY-mm-dd HH:MM",s="HH:MM";return et(new Date(t),a)+"~"+et(new Date(e),s)},async setInfo(){let t=await S();t.forEach(t=>{t.time=this.timeTxt(t.startTime,t.endTime)}),this.tableData=t;let e=1;this.tableData.forEach((t,a)=>{0==a||this.tableData[a].name==this.tableData[a-1].name||e++,t.index=e}),this.spanArr=this.setSpanArr()},detail(t){this.$router.push({name:"Seat",query:t})},async search(){if(!this.examId||!this.classNum||!this.arrangeType)return void this.$message({message:"请先选择必选项",type:"error"});let t=await I({examId:this.examId,classNum:this.classNum,arrangeType:this.arrangeType});this.examInfo=t,this.classrooms=t.classrooms,this.tableData=[];for(let e=0;e<this.classrooms.length;e++){let t=this.classrooms[e];this.tableData=this.tableData.concat(t.studentDTOs)}"SNO"==this.arrangeType?this.tableData.sort((function(t,e){var a=t.id.toLowerCase(),s=e.id.toLowerCase();return a<s?-1:a>s?1:0})):this.tableData.sort((function(t,e){var a=t.name.toLowerCase(),s=e.name.toLowerCase();return a<s?-1:a>s?1:0}))}}},st=at,rt=(a("6596"),Object(D["a"])(st,W,tt,!1,null,"540e3656",null)),nt=rt.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._m(0),a("el-form",{attrs:{"label-width":"200px",inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{staticStyle:{"padding-top":"10px"},attrs:{type:"txt"},on:{click:function(e){t.drawer=!0}}},[t._v("查看座位号")])],1),a("el-form-item",{attrs:{label:"考试科目："}},[a("span",[t._v(t._s(t.examName))])]),a("el-form-item",{attrs:{label:"监考老师："}},[a("span",[t._v(t._s(t.teachName))])]),a("el-form-item",{attrs:{label:"教室："}},[a("span",[t._v(t._s(t.classroom))])]),a("el-form-item",{attrs:{label:"考试起止时间："}},[a("span",[t._v(t._s(t.time))])])],1),a("el-drawer",{attrs:{title:"",visible:t.drawer,direction:"ltr"},on:{"update:visible":function(e){t.drawer=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),a("el-table-column",{attrs:{prop:"id",label:"学号",width:"130"}}),a("el-table-column",{attrs:{prop:"classNum",label:"班级",width:"130"}}),a("el-table-column",{attrs:{prop:"seat",align:"center",label:"座位号",width:"80"}})],1)],1),t._m(1),a("div",{staticStyle:{"margin-left":"450px"}},[a("div",{staticClass:"rectangle",staticStyle:{"margin-top":"10px","padding-top":"10px","margin-left":"250px",display:"block","font-size":"18px","background-color":"#5a9bd5"}},[t._v("\n      讲台\n    ")]),a("div",{staticStyle:{margin:"10px"}}),t._l(parseInt(t.classroomNum/8+1),(function(e){return a("div",{key:e},t._l(4,(function(s){return a("span",{key:s,staticClass:"rectangle"},[a("span",{staticClass:"item",staticStyle:{float:"left","margin-left":"10px"}},[t._v(t._s(parseInt(t.classroomNum/8+1)*(2*s-2)+e))]),a("span",{staticClass:"item",staticStyle:{float:"right","margin-right":"10px"}},[t._v(t._s(parseInt(t.classroomNum/8+1)*(2*s-1)+e))])])})),0)})),a("el-divider")],2)],1)},lt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"background-color":"#a2a2a2",height:"30px","text-align":"center",color:"white"},attrs:{flex:""}},[s("div",[s("img",{staticClass:"img-class",attrs:{src:a("818f"),alt:""}})]),s("span",{staticClass:"animate",staticStyle:{"margin-top":"7px","margin-left":"30px"}},[t._v("诚信考试 杜绝作弊\n    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#1c86ee",height:"50px","text-align":"center","letter-spacing":"100px",width:"100%"}},[a("h1",{staticStyle:{color:"white",width:"100%"}},[t._v("座位表")])])}],ot={data(){return{exams:[],classes:[],selectedClasses:[],students:[],arrangeType:"SNO",examId:"",classNum:"",fullscreenLoading:!1,classrooms:[],examInfo:"",types:[{id:1,label:"学号乱序",value:"SNO"},{id:2,label:"姓名乱序",value:"NAME"}],relationId:"",tableData:[],classroomNum:"",teachName:"",time:"",examName:"",drawer:!1,classroom:""}},props:{},components:{},mounted(){this.relationId=this.$route.query.relationId,this.getStudents(),this.classroom=this.$route.query.classroom,this.classroomNum=this.$route.query.classroomNum,this.teachName=this.$route.query.teachName,this.examName=this.$route.query.name,this.time=this.$route.query.time},methods:{async getStudents(){if(!this.relationId)return void this.$message({message:"relationId 为空",type:"error"});let t=await I({relationId:this.relationId});this.tableData=t}}},ct=ot,ut=(a("2cc0"),Object(D["a"])(ct,it,lt,!1,null,"39ec77f2",null)),pt=ut.exports;s["default"].use(K["a"]);var mt=new K["a"]({mode:"hash",routes:[{path:"/back",name:"Back",component:Z},{path:"/exam",name:"Exam",component:nt},,{path:"/seat",name:"Seat",component:pt}]});a("32dd");const{INIT_NET:dt}=w;s["default"].config.productionTip=!1,s["default"].use(J.a);let ht="http://localhost:8082";dt({basePath:ht}),new s["default"]({router:mt,render:t=>t(F)}).$mount("#app")},"5fd3":function(t,e,a){},"63bb":function(t,e,a){},6596:function(t,e,a){"use strict";a("e161")},6660:function(t,e){String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String("undefined"!==typeof e?e:" "),this.length>t?String(this):(t-=this.length,t>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))})},"721e":function(t,e,a){},"818f":function(t,e,a){t.exports=a.p+"img/notice.0ad9724a.png"},"943c":function(t,e,a){"use strict";a("63bb")},c1f8:function(t,e,a){"use strict";a("721e")},df9f:function(t,e,a){"use strict";a("5fd3")},e161:function(t,e,a){}});
//# sourceMappingURL=app.483d49f8.js.map